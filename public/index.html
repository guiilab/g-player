<!--

Index.js
G-Player Data Visualization

- Creates the DOM
- Loads dependencies
- Initializes the mapping tool (Leaflet.js)
- Configures the Map settings
- Configures the User Interface settings

Authors:
@alexjohnson505

-->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- <link rel="icon" href="../../favicon.ico"> -->

  <title>G-Player Data Visualization | Visualize Data</title>

  <!-- External Style Sheets -->
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
  <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/messenger/1.4.0/css/messenger.css" />
  <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/messenger/1.4.0/css/messenger-theme-air.css" />
  <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/0.2.3/leaflet.draw.css" />
  <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/css/select2.min.css" />

  <!-- Local Style Sheets -->
  <link href="css/style.css" rel="stylesheet" />

</head>
<body>
  <i id="loading" class="fa fa-cog fa-spin" style="display: none;"></i>

  <!-- Page Content -->
  <div id="wrapper">

    <!-- Left Options Sidebar -->
    <div id="sidebar-wrapper"></div>

   <!-- Leaflet.js Map -->
   <div id="map"></div>

   <!-- Map Information -->
   <div id="legend"></div>
   
 </div><!-- /#wrapper -->

 <!-- External Javascript Dependencies -->
 <script src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
 <script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.7.0/underscore-min.js"></script>
 <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
 <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
 <script src="http://cdnjs.cloudflare.com/ajax/libs/messenger/1.4.0/js/messenger.min.js"></script>
 <script src="http://cdnjs.cloudflare.com/ajax/libs/messenger/1.4.0/js/messenger-theme-future.js"></script>
 <script src="http://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/0.2.3/leaflet.draw.js"></script>
 <script src="http://cdnjs.cloudflare.com/ajax/libs/select2/4.0.0-rc.2/js/select2.min.js"></script>

 <!-- Libraries Hosted Locally --> 
 <script src="lib/heatmap.min.js"></script>
 <script src="lib/leaflet-heatmap.js"></script>

 <!-- Load Settings -->
 <script src="config/settings.js"></script>

 <!-- App Functionality -->
 <script src="js/visualizer.js"></script>
 <script src="js/ui.js"></script>
 <script src="js/heatmap.js"></script>
 <script src="js/exporter.js"></script>

 <!-- Page-Specific Javascript -->
 <script>

  /*************************
       Load Tempalates
   *************************/

  $("#sidebar-wrapper").load('templates/left-options-menu.tpl.html', function(result){
      UI.initialize();
  });

  $("#legend").load('templates/legend.tpl.html', function(result){
    $(".action-select").select2();
    
    $('#toggle_all_data').change(function(e) {
      
      // Get current status
      var checked = $('#toggle_all_data').is(':checked');

      if (checked) {
        $('.filter-by-action').hide();
      } else {
        $('.filter-by-action').show();
      }

    });
  });

  /*************************
         Setup MAP
   *************************/

  // Save window size.
  var windowWidth  = $(document).width();
  var windowHeight = $(document).height();

  // Initialize Map's Size
  $("#map").css("width", windowWidth);
  $("#map").css("height", windowHeight);

  // Define Map Parameters
  var map = L.map('map', {
    
    // Initialize Zoom Limits
    minZoom: 2,
    maxZoom: 8,

    // Support Leaflet.draw
    drawControl: false,
  })

  map.on('click', function(e) {
    var data = { 
      latitude : e.latlng.lat,
      longitude : e.latlng.lng,
    }
    
    console.log(Visualizer.unformatData(data));
    
  });
  
</script>
</body>
</html>
